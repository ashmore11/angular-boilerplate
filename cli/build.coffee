shjs = require 'shelljs/global'

###
CLI Commands
###
exec "coffee -c cli/cli.coffee", ( code, output ) ->

	if code is 0
		# Replace generated coffeescript comment
		stupid = "// Generated by CoffeeScript 1.9.3"
		
		sed( '-i', stupid, '#!/usr/bin/env node', 'cli/cli.js' )
		
		echo 'CLI build complete!'

	else
		echo 'Error: CLI build failed...'
		exit 1

###
Utils
###
exec "coffee -o cli/tasks -c cli/tasks/coffee/utils.coffee", ( code ) ->

	if code is 0
		echo 'CLI utils build complete!'

	else
		echo 'Error: CLI utils build failed...'
		exit 1

###
View Generator
###
exec "coffee -o cli/tasks -c cli/tasks/coffee/view_generator.coffee", ( code ) ->

	if code is 0
		echo 'View Generator build complete!'

	else
		echo 'Error: View Generator build failed...'
		exit 1

###
View Deleter
###
exec "coffee -o cli/tasks -c cli/tasks/coffee/view_deleter.coffee", ( code ) ->

	if code is 0
		echo 'View Deleter build complete!'

	else
		echo 'Error: View Deleter build failed...'
		exit 1

###
Service Generator
###
exec "coffee -o cli/tasks -c cli/tasks/coffee/service_generator.coffee", ( code ) ->

	if code is 0
		echo 'Service Generator build complete!'

	else
		echo 'Error: Service Generator build failed...'
		exit 1